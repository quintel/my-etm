.pr-5
  .flex.justify-between.items-center.mb-4
    %h3.text-sm.font-semibold.text-midnight-800= t('saved_scenarios.filters.title')
    = link_to t('saved_scenarios.filters.clear'), '#', class: 'text-xs text-midnight-600 hover:text-midnight-800 underline', data: { action: 'click->search-form#clear' }

  .flex.text-midnight-800.mb-4
    = tag.input type: 'text',                                                           |
      name: 'search',                                                                   |
      value: '',                                                                        |
      placeholder: t('saved_scenarios.filters.search'),                                 |
      autocomplete: 'off',                                                              |
      data: { action: 'input->search-form#search' },                                    |
      class: 'p-2 text-sm flex-grow'                                                    |
    = heroicon "magnifying-glass", options: { class: "w-5 h-5 ml-2 my-auto" }

  - if filters[:versions].present? && filters[:versions].count > 1
    .mb-4
      %label.mb-2.text-sm.text-gray-400{ for: 'version' }
        #{t('saved_scenarios.filters.version')}
      = select_tag(                                                                       |
        'version',                                                                        |
        options_for_select([[t('saved_scenarios.filters.none'), '']]                      |
          + filters[:versions].map { |v| [v.titleize, v.id] }),                           |
        id: 'version',                                                                    |
        data: { action: 'change->search-form#search' },                                   |
        class: 'w-full rounded-md border-gray-200 text-sm p-2' )                          |

  - if filters[:featured].present?
    .mb-4
      = check_box_tag 'featured', "1", false,                                             |
        data: { action: 'change->search-form#search' },                                   |
        class: 'rounded-md border-midnight-400 !checked:bg-midnight-920 mr-4'             |
      = label_tag 'featured', t('saved_scenarios.filters.featured'), class: 'text-sm'

  - if filters[:end_years].present? && filters[:end_years].count > 1
    %details.mb-4
      %summary.cursor-pointer.text-sm.text-gray-400.mb-2
        #{t('saved_scenarios.filters.end_year')}
      .mt-2.space-y-1
        - filters[:end_years].sort.reverse.each do |year, count|
          .flex.items-center
            = check_box_tag "end_years[]", year, false,                                   |
              id: "end_year_#{year}",                                                     |
              data: { action: 'change->search-form#search' },                             |
              class: 'rounded-md border-gray-200 text-midnight-920 mr-2'                  |
            = label_tag "end_year_#{year}", "#{year} (#{count})", class: 'text-sm'

  - if filters[:area_codes].present? && filters[:area_codes].count > 1
    %details.mb-4
      %summary.cursor-pointer.text-sm.text-gray-400.mb-2
        #{t('saved_scenarios.filters.area_code')}
      .mt-2.space-y-1
        - filters[:area_codes].sort.each do |code, count|
          .flex.items-center
            = check_box_tag "area_codes[]", code, false,                                  |
              id: "area_code_#{code}",                                                    |
              data: { action: 'change->search-form#search' },                             |
              class: 'rounded-md border-gray-200 text-midnight-920 mr-2'                  |
            = label_tag "area_code_#{code}", "#{t("areas.#{code}", default: code.upcase)} (#{count})", class: 'text-sm'
