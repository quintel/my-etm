<%- content_for :menu_title, 'New Featured Scenario User' %>
<%- content_for :title, 'New Featured Scenario User' %>
<%= render(partial: "/admin/block_right_menu") %>

<div class="max-w-xl mx-auto p-6 bg-white shadow-sm rounded-md">
  <%= form_with(model: @featured_scenario_user, url: admin_featured_scenario_users_path, local: true) do |form| %>
    <% if @featured_scenario_user.errors.any? %>
      <div class="errors bg-red-100 text-red-700 p-3 mb-4 rounded">
        <h2 class="font-semibold"><%= pluralize(@featured_scenario_user.errors.count, "error") %>:</h2>
        <ul class="list-disc pl-4">
          <% @featured_scenario_user.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="space-y-4">
      <div class="field">
        <%= form.label :name, class: "block font-medium text-gray-700 mb-1" %>
        <%= form.text_field :name, class: "w-full p-2 border rounded-md focus:ring focus:ring-blue-300" %>
      </div>

      <%= form.hidden_field :user_id, id: "selected_user_id" %>

      <div class="field" data-controller="user-search">
        <%= form.label :user_id, 'User (optional)', class: "block font-medium text-gray-700 mb-1 mt-4" %>
        <input list="users" id="user_search" data-user-search-target="search"
          class="w-full p-2 border rounded-md focus:ring focus:ring-blue-300" />
        <datalist id="users" data-user-search-target="datalist">
          <% User.all.each do |user| %>
            <option value="<%= user.email %>" data-id="<%= user.id %>"></option>
          <% end %>
        </datalist>
        <input type="hidden" id="user_id" name="featured_scenario_user[user_id]" data-user-search-target="hiddenInput" />
      </div>

      <div class="actions text-right">
        <%= form.submit "Create Featured Scenario User",
          class: "bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 mt-4 rounded-md transition" %>
      </div>
    </div>
  <% end %>
</div>
